# Configuration Guide

This project uses environment variables for configuration. A single root `.env` file is used to manage settings for both the frontend (Vite) and the Puppeteer backend.

## Environment Files

-   `.env.example`: Template for required and optional environment variables.
-   `.env`: Your local configuration file (not tracked by Git).

## Variable Prefixing

-   **`VITE_*`**: Variables prefixed with `VITE_` are exposed to the frontend browser environment. **Never put secrets in these variables.**
-   **No Prefix**: Variables without the `VITE_` prefix are only accessible to the Node.js (Puppeteer) backend and Lambda functions.

## Key Configuration Categories

### General
| Variable | Description | Default |
|----------|-------------|---------|
| `NODE_ENV` | Environment mode (`development`, `production`) | `development` |
| `PORT` | Port for the Puppeteer backend server | `3001` |
| `FRONTEND_URLS` | Comma-separated list of allowed frontend origins for CORS | `http://localhost:5173` |

### AWS Deployment
These values are typically populated after deploying the infrastructure with SAM.
| Variable | Description |
|----------|-------------|
| `VITE_API_GATEWAY_URL` | Base URL of the deployed API Gateway |
| `VITE_AWS_REGION` | AWS region where resources are deployed (e.g., `us-west-2`) |
| `VITE_COGNITO_USER_POOL_ID` | Cognito User Pool ID |
| `VITE_COGNITO_USER_POOL_WEB_CLIENT_ID` | Cognito User Pool Client ID |
| `DYNAMODB_TABLE` | Name of the DynamoDB table for profiles |

### RAGStack (Required)
Generated by `scripts/deploy/deploy-ragstack.js`.
| Variable | Description |
|----------|-------------|
| `RAGSTACK_GRAPHQL_ENDPOINT` | URL for the RAGStack GraphQL API |
| `RAGSTACK_API_KEY` | API Key for RAGStack authentication |
| `RAGSTACK_KB_ID` | Knowledge Base ID |

### Testing & Development
| Variable | Description | Default |
|----------|-------------|---------|
| `LINKEDIN_TESTING_MODE` | Enable to use mock server instead of real LinkedIn | `false` |
| `LINKEDIN_BASE_URL` | Base URL for LinkedIn (or mock server) | `https://www.linkedin.com` |

### Puppeteer & Browser
| Variable | Description | Default |
|----------|-------------|---------|
| `HEADLESS` | Run browser in headless mode (`true`/`false`) | `true` |
| `SLOW_MO` | Delay in milliseconds between Puppeteer actions | `50` |
| `VIEWPORT_WIDTH` | Browser viewport width | `1200` |
| `VIEWPORT_HEIGHT` | Browser viewport height | `1200` |

### LinkedIn Interaction Settings
These settings control the automation behavior and help prevent account flagging.
| Variable | Description | Default |
|----------|-------------|---------|
| `LINKEDIN_SESSION_TIMEOUT` | Max duration for a LinkedIn session (ms) | `3600000` |
| `MAX_CONCURRENT_INTERACTIONS` | Max number of parallel interactions | `3` |
| `HUMAN_DELAY_MIN` | Minimum random delay between actions (ms) | `1000` |
| `HUMAN_DELAY_MAX` | Maximum random delay between actions (ms) | `3000` |
| `ACTIONS_PER_HOUR` | Maximum LinkedIn actions per hour | `100` |

### Security & Encryption
| Variable | Description |
|----------|-------------|
| `VITE_CRED_SEALBOX_PUBLIC_KEY_B64` | Base64 encoded public key for credential encryption |
| `CRED_SEALBOX_PRIVATE_KEY_PATH` | Path to the private key file for decryption |

## Automated Configuration

Fetch AWS outputs after a SAM deployment:
```bash
bash scripts/deploy/get-env-vars.sh <stack-name> --update-env
```
This updates your root `.env` file with API Gateway URLs and Cognito IDs.
