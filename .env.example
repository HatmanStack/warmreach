# ============================================
# SETUP INSTRUCTIONS
# ============================================
# 1. Copy this file to .env:
#    cp .env.example .env
#
# 2. Generate encryption keys:
#    node scripts/dev-tools/generate-device-keypair.js
#
# 3. Deploy AWS infrastructure:
#    cd backend && sam build && sam deploy --guided && cd ..
#
# 4. Auto-populate AWS values:
#    bash scripts/deploy/get-env-vars.sh <stack-name> --update-env
#
# 5. Start the app:
#    npm run dev           (frontend at localhost:5173)
#    npm run dev:client    (backend at localhost:3001)
#
# ============================================

# SINGLE .env FILE
# ============================================
# This project uses a SINGLE root .env file for both:
#   - Frontend (Vite) - reads VITE_* variables
#   - Client backend - reads all variables
#
# Do NOT create separate .env files in frontend/ or client/
#
# Security notes:
#   - Only VITE_* variables are exposed to the browser
#   - Do NOT put secrets in VITE_* variables
#   - Crypto keys are generated by: scripts/dev-tools/generate-device-keypair.js

########################################
# General
########################################
NODE_ENV=development
PORT=3001
# Comma-separated list of allowed frontend origins
FRONTEND_URLS=http://localhost:5173,http://localhost:3000

########################################
# Frontend (Vite)
########################################

# ============================================
# AWS DEPLOYMENT OUTPUTS
# ============================================
# After deploying with SAM, run:
#   bash scripts/deploy/get-env-vars.sh <stack-name> --update-env
# This will automatically populate these values

# API Gateway base URL (SAM Output: ApiUrl)
# Example: https://abc123.execute-api.us-west-2.amazonaws.com/prod
VITE_API_GATEWAY_URL=

# AWS Region
VITE_AWS_REGION=us-west-2

# Cognito User Pool configuration (SAM Outputs)
# UserPoolId format: us-west-2_abc123xyz
VITE_COGNITO_USER_POOL_ID=
# UserPoolClientId format: 1a2b3c4d5e6f7g8h9i
VITE_COGNITO_USER_POOL_WEB_CLIENT_ID=
# Identity Pool (optional, not used currently)
VITE_COGNITO_IDENTITY_POOL_ID=

# WebSocket API URL (SAM Output: WebSocketUrl)
# Example: wss://abc123.execute-api.us-west-2.amazonaws.com/prod
VITE_WEBSOCKET_URL=

# Stripe price ID for pro tier (override for staging/dev)
# VITE_STRIPE_PRO_PRICE_ID=price_pro_monthly

# Frontend feature flags
VITE_MOCK_MODE=false

# Set by the key generator on first run:
VITE_CRED_SEALBOX_PUBLIC_KEY_B64=

# Browser automation defaults
HEADLESS=true
SLOW_MO=50
VIEWPORT_WIDTH=1200
VIEWPORT_HEIGHT=1200

# Timeouts (ms)
DEFAULT_TIMEOUT=30000
NAVIGATION_TIMEOUT=50000
LOGIN_SECURITY_TIMEOUT=0

# LinkedIn interaction settings
LINKEDIN_SESSION_TIMEOUT=3600000
SESSION_HEALTH_CHECK_INTERVAL=300000
MAX_SESSION_ERRORS=5
SESSION_RECOVERY_TIMEOUT=60000
MAX_CONCURRENT_INTERACTIONS=3
MAX_CONCURRENT_SESSIONS=1
INTERACTION_QUEUE_SIZE=50
RATE_LIMIT_WINDOW=60000
RATE_LIMIT_MAX=10
DAILY_INTERACTION_LIMIT=500
HOURLY_INTERACTION_LIMIT=100
INTERACTION_RETRY_ATTEMPTS=3
INTERACTION_RETRY_BASE_DELAY=1000
INTERACTION_RETRY_MAX_DELAY=300000
RETRY_JITTER_FACTOR=0.1
HUMAN_DELAY_MIN=1000
HUMAN_DELAY_MAX=3000
ACTIONS_PER_MINUTE=8
ACTIONS_PER_HOUR=100
TYPING_SPEED_MIN=80
TYPING_SPEED_MAX=150
TYPING_PAUSE_CHANCE=0.1
TYPING_PAUSE_MIN=500
TYPING_PAUSE_MAX=2000
MOUSE_MOVEMENT_STEPS=5
MOUSE_MOVEMENT_DELAY=100
SCROLL_STEP_SIZE=120
SCROLL_DELAY=200
SUSPICIOUS_ACTIVITY_THRESHOLD=3
SUSPICIOUS_ACTIVITY_WINDOW=300000
COOLDOWN_MIN_DURATION=30000
COOLDOWN_MAX_DURATION=300000
LINKEDIN_NAVIGATION_TIMEOUT=30000
ELEMENT_WAIT_TIMEOUT=10000
MESSAGE_COMPOSE_TIMEOUT=15000
POST_CREATION_TIMEOUT=20000
CONNECTION_REQUEST_TIMEOUT=15000
MAX_MESSAGE_LENGTH=8000
MAX_POST_LENGTH=3000
MAX_CONNECTION_MESSAGE_LENGTH=300
BROWSER_LAUNCH_TIMEOUT=30000
PAGE_LOAD_TIMEOUT=30000
BROWSER_IDLE_TIMEOUT=1800000
MAX_CONSECUTIVE_ERRORS=5
ERROR_COOLDOWN_DURATION=60000
PERFORMANCE_LOGGING_ENABLED=false
AUDIT_LOGGING_ENABLED=true
METRICS_COLLECTION_INTERVAL=60000
ENABLE_MESSAGE_SENDING=true
ENABLE_CONNECTION_REQUESTS=true
ENABLE_POST_CREATION=true
ENABLE_HUMAN_BEHAVIOR=true
ENABLE_SUSPICIOUS_ACTIVITY_DETECTION=true
LINKEDIN_DEBUG_MODE=false
SCREENSHOT_ON_ERROR=false
SAVE_PAGE_SOURCE_ON_ERROR=false
VERBOSE_LOGGING=false

########################################
# Client JWT Validation
########################################
# Cognito issuer URL (required for JWT validation)
# Format: https://cognito-idp.{region}.amazonaws.com/{poolId}
COGNITO_ISSUER=
# Cognito client ID for JWT audience validation (same as VITE_COGNITO_USER_POOL_WEB_CLIENT_ID)
COGNITO_CLIENT_ID=

########################################
# Electron App (optional overrides)
########################################
# WebSocket URL for Electron agent connectivity
# WARMREACH_WS_URL=
# Frontend URL for Electron tray app
# WARMREACH_APP_URL=https://app.warmreach.com

# Local file paths
APP_NAME=warmreach
SCREENSHOTS_DIR=./screenshots
LINKS_FILE=./data/possible-links.json
GOOD_CONNECTIONS_FILE=./data/good-connections-links.json

# Activity thresholds for identifying active connections
RECENCY_HOURS=6
RECENCY_DAYS=5
RECENCY_WEEKS=3
HISTORY_TO_CHECK=4
THRESHOLD=8
PAGE_NUMBER_START=17
PAGE_NUMBER_END=17

# LinkedIn Testing Mode
# Set to true to use mock LinkedIn server instead of real LinkedIn
# When true, LINKEDIN_BASE_URL defaults to http://localhost:3333
LINKEDIN_TESTING_MODE=false
# Override LinkedIn base URL (defaults to https://www.linkedin.com or http://localhost:3333 in testing mode)
# LINKEDIN_BASE_URL=http://localhost:3333

########################################
# Control Plane (optional â€” anti-spam rate limit sync)
########################################
# When configured, the client backend syncs rate limits with a centralized
# control plane and reports interaction telemetry for abuse detection.
# Leave empty to use local rate limits only.
# CONTROL_PLANE_URL=https://api.warmreach.com/prod
# CONTROL_PLANE_DEPLOYMENT_ID=
# CONTROL_PLANE_API_KEY=

# ============================================
# BACKEND AWS CONFIGURATION
# ============================================
# These are automatically populated by get-env-vars.sh --update-env

# API Gateway base URL (same as VITE_API_GATEWAY_URL)
API_GATEWAY_BASE_URL=

# AWS Region (same as VITE_AWS_REGION)
AWS_REGION=us-west-2

# DynamoDB table name (SAM Output: DynamoDBTableName)
# Format: <stack-name>-profiles
DYNAMODB_TABLE=

# S3 Profile Text Storage (used by benchmark scripts)
# S3_PROFILE_TEXT_BUCKET_NAME=

# Set by the key generator on first run:
CRED_SEALBOX_PRIVATE_KEY_PATH=

########################################
# Lambda / Deployment (reference only, not used by local runtime)
########################################
# OPENAI_API_KEY=
# DYNAMODB_TABLE=
